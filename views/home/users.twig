{% extends "layouts/main.twig" %}

{% block content %}
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
        <h2 class="text-3xl font-bold text-gray-800 dark:text-gray-200 mb-4 sm:mb-0">All Users</h2>
        
        <form method="GET" action="" class="pagination-limit-form">
            <label for="limit" class="mr-2 text-gray-600 dark:text-gray-400">Results per page:</label>
            <select name="limit" id="limit" onchange="this.form.submit()" class="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                {% for limit in allowedLimits %}
                    <option value="{{ limit }}" {{ limit == currentLimit ? 'selected' : '' }}>
                        {{ limit }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </div>

    <div class="space-y-8">
    {% if users %}
        {% for user in users %}
            <article>
                <h3 class="text-2xl font-bold mb-2">
                    <a href="{{ base_url }}/users/{{ user.user_id }}" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:underline">
                        {{ user.name }}
                    </a>
                </h3>
                <p class="text-gray-600 dark:text-gray-400">{{ user.email }}</p>
            </article>
        {% endfor %}
    {% else %}
        <p class="text-gray-500 dark:text-gray-400">No users found.</p>
    {% endif %}
    </div>

    <div class="flex justify-center mt-8">
        {{ pagination.render()|raw }}
    </div>
{% endblock %}
